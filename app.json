{
  "id": "no.easee",
  "version": "1.0.7",
  "brandColor": "#323232",
  "compatibility": ">=3.0.0",
  "sdk": 2,
  "name": {
    "en": "Easee Charger",
    "sv": "Easee Laddbox"
  },
  "tags": {
    "en": [
      "easee",
      "charge",
      "charger"
    ],
    "sv": [
      "easee",
      "ladda",
      "laddare",
      "laddbox"
    ]
  },
  "description": {
    "en": "Small. Smart. Full of power.",
    "sv": "Liten. Smart. Full av kraft."
  },
  "author": {
    "name": "Richard Barkestam",
    "email": "richard@barkestam.se"
  },
  "contributing": {
    "donate": {
      "paypal": {
        "username": "RBarkestam",
        "currency": "EUR"
      }
    }
  },
  "bugs": {
    "url": "https://github.com/ricott/homey-no.easee/issues"
  },
  "source": "https://github.com/ricott/homey-no.easee",
  "homeyCommunityTopicId": 31647,
  "category": [
    "energy"
  ],
  "dependencies": {
    "net": "*"
  },
  "images": {
    "large": "/assets/images/large.png",
    "small": "/assets/images/small.png"
  },
  "capabilities": {
    "enabled": {
      "title": {
        "en": "Enabled",
        "sv": "Aktiverad"
      },
      "type": "boolean",
      "getable": true,
      "setable": false,
      "icon": "/assets/enabled.svg"
    },
    "charger_status": {
      "type": "string",
      "title": {
        "en": "Status",
        "sv": "Status"
      },
      "getable": true,
      "setable": false,
      "uiComponent": "sensor",
      "icon": "/assets/onoff.svg"
    },
    "current_offered": {
      "type": "number",
      "decimals": 2,
      "title": {
        "en": "Current offered",
        "sv": "Erbjuden ström"
      },
      "units": {
        "en": "A"
      },
      "getable": true,
      "setable": false,
      "uiComponent": "sensor",
      "icon": "/assets/max_charge.svg"
    },
    "measure_charge": {
      "type": "number",
      "decimals": 2,
      "title": {
        "en": "Last 30 days",
        "sv": "Senaste 30 dagarna"
      },
      "getable": true,
      "setable": false,
      "uiComponent": "sensor",
      "icon": "/assets/last_month_charge.svg",
      "units": {
        "en": "kWh"
      }
    }
  },
  "drivers": [
    {
      "id": "charger",
      "class": "other",
      "name": {
        "en": "Easee charger",
        "sv": "Easee laddbox"
      },
      "images": {
        "large": "/drivers/charger/assets/images/large.png",
        "small": "/drivers/charger/assets/images/small.png"
      },
      "capabilities": [
        "charger_status",
        "enabled",
        "measure_current.offered",
        "measure_power",
        "measure_current.p1",
        "measure_current.p2",
        "measure_current.p3",
        "measure_voltage",
        "meter_power.lastCharge",
        "meter_power",
        "measure_charge",
        "measure_charge.last_month",
        "button.organize"
      ],
      "capabilitiesOptions": {
        "measure_current.offered": {
          "title": {
            "en": "Current allocated",
            "sv": "Allokerad ström"
          }
        },
        "measure_current.p1": {
          "title": {
            "en": "Current P1",
            "sv": "Ström L1"
          }
        },
        "measure_current.p2": {
          "title": {
            "en": "Current P2",
            "sv": "Ström L2"
          }
        },
        "measure_current.p3": {
          "title": {
            "en": "Current P3",
            "sv": "Ström L3"
          }
        },
        "meter_power.lastCharge": {
          "title": {
            "en": "Last charge session",
            "sv": "Senaste laddsessionen"
          }
        },
        "meter_power": {
          "title": {
            "en": "Lifetime",
            "sv": "Livstid"
          }
        },
        "measure_charge.last_month": {
          "title": {
            "en": "Last month",
            "sv": "Förra månaden"
          }
        },
        "button.organize": {
          "maintenanceAction": true,
          "title": {
            "en": "Reorder capabilities",
            "sv": "Reorganisera egenskaperna"
          },
          "desc": {
            "en": "Reorder capabilities in the intended order.",
            "sv": "Flytta egenskaperna till den tänkta ordningen."
          }
        }
      },
      "settings": [
        {
          "type": "group",
          "label": {
            "en": "Charger settings",
            "sv": "Laddarens inställningar"
          },
          "children": [
            {
              "id": "showLast30daysStats",
              "type": "checkbox",
              "label": {
                "en": "Show capability: Last 30 days",
                "sv": "Visa egenskapen: Senaste 30 dagarna"
              },
              "value": false
            },
            {
              "id": "showLastMonthStats",
              "type": "checkbox",
              "label": {
                "en": "Show capability: Last month",
                "sv": "Visa egenskapen: Förra månaden"
              },
              "value": false
            }
          ]
        },
        {
          "type": "group",
          "label": {
            "en": "Information",
            "sv": "Information"
          },
          "children": [
            {
              "id": "detectedPowerGridType",
              "type": "label",
              "label": {
                "en": "Power grid type",
                "sv": "Elnätstyp"
              },
              "value": ""
            },
            {
              "id": "mainFuse",
              "type": "label",
              "label": {
                "en": "Main fuse (A)",
                "sv": "Huvudsäkring (A)"
              },
              "value": ""
            },
            {
              "id": "circuitFuse",
              "type": "label",
              "label": {
                "en": "Circuit fuse (A)",
                "sv": "Kretssäkring (A)"
              },
              "value": ""
            },
            {
              "id": "offlineChargingMode",
              "type": "label",
              "label": {
                "en": "Allow offline charging",
                "sv": "Tillåt offline laddning"
              },
              "value": ""
            },
            {
              "id": "maxOfflineCurrent",
              "type": "label",
              "label": {
                "en": "Max current when offline (A)",
                "sv": "Max offline ström (A)"
              },
              "value": ""
            },
            {
              "id": "phaseMode",
              "type": "label",
              "label": {
                "en": "Phase mode",
                "sv": "Fasläge"
              },
              "value": ""
            },
            {
              "id": "lockCablePermanently",
              "type": "label",
              "label": {
                "en": "Cable locked permanently",
                "sv": "Lås kabel permanent"
              },
              "value": ""
            },
            {
              "id": "idleCurrent",
              "type": "label",
              "label": {
                "en": "Enable idle current",
                "sv": "Erbjud ström när laddning inte är aktiv"
              },
              "value": ""
            },
            {
              "id": "nodeType",
              "type": "label",
              "label": {
                "en": "Local node type",
                "sv": "Lokal nodtyp"
              },
              "value": ""
            },
            {
              "id": "smartCharging",
              "type": "label",
              "label": {
                "en": "Smart charging",
                "sv": "Smartladdning"
              },
              "value": ""
            },
            {
              "id": "version",
              "type": "label",
              "label": {
                "en": "Firmware version",
                "sv": "Programvara"
              },
              "value": ""
            }
          ]
        },
        {
          "type": "group",
          "label": {
            "en": "Debug",
            "sv": "Felsökning"
          },
          "children": [
            {
              "id": "reasonForNoCurrent",
              "type": "textarea",
              "label": {
                "en": "Reason for no current",
                "sv": "Anledning till att ingen ström erbjuds"
              },
              "value": ""
            },
            {
              "id": "site",
              "type": "textarea",
              "label": {
                "en": "Site info",
                "sv": "Anläggning"
              },
              "value": ""
            },
            {
              "id": "commandResponse",
              "type": "textarea",
              "label": {
                "en": "Last command response",
                "sv": "Senaste kommandosvaret"
              },
              "value": ""
            },
            {
              "id": "easee_last_error",
              "type": "textarea",
              "label": {
                "en": "Last API error",
                "sv": "Senaste API felet"
              },
              "value": ""
            },
            {
              "id": "streamMessages",
              "type": "textarea",
              "label": {
                "en": "Last stream messages",
                "sv": "Senaste meddelandena"
              },
              "value": ""
            },
            {
              "id": "log",
              "type": "textarea",
              "label": {
                "en": "Log",
                "sv": "Logg"
              },
              "value": ""
            }
          ]
        }
      ],
      "pair": [
        {
          "id": "login_credentials",
          "template": "login_credentials",
          "options": {
            "logo": "../../../assets/images/logo.png",
            "usernameLabel": {
              "en": "Phone number",
              "sv": "Mobilnummer"
            },
            "usernamePlaceholder": "+46....",
            "passwordLabel":  {
              "en": "Password",
              "sv": "Lösenord"
            }
          }
        },
        {
          "id": "list_devices",
          "template": "list_devices",
          "navigation": {
            "next": "add_devices"
          }
        },
        {
          "id": "add_devices",
          "template": "add_devices"
        }
      ]
    }
  ],
  "flow": {
    "triggers": [
      {
        "id": "charger_status_changed",
        "title": {
          "en": "Charger status changed",
          "sv": "Laddarens status ändrades"
        },
        "titleFormatted": {
          "en": "[[device]] status changed to [[status]]",
          "sv": "[[device]] status ändrades till [[status]]"
        },
        "args": [
          {
            "name": "device",
            "type": "device",
            "filter": "driver_id=charger"
          }
        ],
        "tokens": [
          {
            "name": "status",
            "type": "string",
            "title": {
              "en": "Charger status",
              "sv": "Laddarens status"
            },
            "example": {
              "en": "Car connected",
              "sv": "Car connected"
            }
          }
        ]
      }
    ],
    "conditions": [
      {
        "id": "chargerStatus",
        "title": {
          "en": "Charger status is !{{|not}}",
          "sv": "Laddarens status är !{{|inte}}"
        },
        "titleFormatted": {
          "en": "Charger status is !{{|not}} [[status]]",
          "sv": "Laddarens status är !{{|inte}} [[status]]"
        },
        "args": [
          {
            "name": "device",
            "type": "device",
            "filter": "driver_id=charger"
          },
          {
            "name": "status",
            "type": "dropdown",
            "title": {
              "en": "Status",
              "sv": "Status"
            },
            "values": [
              {
                "id": "Standby",
                "label": {
                  "en": "Standby",
                  "sv": "Standby"
                }
              },
              {
                "id": "Paused",
                "label": {
                  "en": "Paused",
                  "sv": "Paused"
                }
              },
              {
                "id": "Charging",
                "label": {
                  "en": "Charging",
                  "sv": "Charging"
                }
              },
              {
                "id": "Completed",
                "label": {
                  "en": "Completed",
                  "sv": "Completed"
                }
              },
              {
                "id": "Error",
                "label": {
                  "en": "Error",
                  "sv": "Error"
                }
              },
              {
                "id": "Car connected",
                "label": {
                  "en": "Car connected",
                  "sv": "Car connected"
                }
              }
            ]
          }
        ]
      }
    ],
    "actions": [
      {
        "id": "toggleCharger",
        "title": {
          "en": "Toggle charger state",
          "sv": "Växla laddarens funktion"
        },
        "titleFormatted": {
          "en": "Toggle [[device]] state",
          "sv": "Växla [[device]] function"
        },
        "args": [
          {
            "name": "device",
            "type": "device",
            "filter": "driver_id=charger"
          }
        ]
      },
      {
        "id": "chargerControl",
        "title": {
          "en": "Control charger",
          "sv": "Styr laddarens funktion"
        },
        "titleFormatted": {
          "en": "Set state to [[chargerAction]]",
          "sv": "Ändra funtion till [[chargerAction]]"
        },
        "args": [
          {
            "name": "device",
            "type": "device",
            "filter": "driver_id=charger"
          },
          {
            "name": "chargerAction",
            "type": "dropdown",
            "title": {
              "en": "Charger action",
              "sv": "Funktion"
            },
            "values": [
              {
                "id": "START",
                "label": {
                  "en": "Start Charging",
                  "sv": "Starta laddning"
                }
              },
              {
                "id": "STOP",
                "label": {
                  "en": "Stop Charging",
                  "sv": "Stoppa laddning"
                }
              },
              {
                "id": "PAUSE",
                "label": {
                  "en": "Pause Charging",
                  "sv": "Pausa laddning"
                }
              },
              {
                "id": "RESUME",
                "label": {
                  "en": "Resume Charging",
                  "sv": "Återuppta laddning"
                }
              }
            ]
          }
        ]
      },
      {
        "id": "circuitCurrentControl",
        "title": {
          "en": "Set dynamic circuit current",
          "sv": "Sätt dynamisk strömstyrka"
        },
        "titleFormatted": {
          "en": "Set dynamic Circuit current to [[current]]",
          "sv": "Ändra dynamisk strömstyrka till [[current]]"
        },
        "args": [
          {
            "name": "device",
            "type": "device",
            "filter": "driver_id=charger"
          },
          {
            "name": "current",
            "type": "range",
            "title": {
              "en": "Current",
              "sv": "Ström"
            },
            "min": 1,
            "max": 32,
            "step": 1,
            "label": " A",
            "labelDecimals": 0
          }
        ]
      },
      {
        "id": "circuitCurrentControlPerPhase",
        "title": {
          "en": "Set dynamic circuit current, per phase",
          "sv": "Sätt dynamisk strömstyrka, per fas"
        },
        "titleFormatted": {
          "en": "Set dynamic circuit current to [[current1]], [[current2]] and [[current3]]",
          "sv": "Ändra dynamisk strömstyrka till [[current1]], [[current2]] och [[current3]]"
        },
        "args": [
          {
            "name": "device",
            "type": "device",
            "filter": "driver_id=charger"
          },
          {
            "name": "current1",
            "type": "range",
            "title": {
              "en": "Current P1",
              "sv": "Ström L1"
            },
            "min": 0,
            "max": 32,
            "step": 1,
            "label": " A",
            "labelDecimals": 0
          },
          {
            "name": "current2",
            "type": "range",
            "title": {
              "en": "Current P2",
              "sv": "Ström L2"
            },
            "min": 0,
            "max": 32,
            "step": 1,
            "label": " A",
            "labelDecimals": 0
          },
          {
            "name": "current3",
            "type": "range",
            "title": {
              "en": "Current P3",
              "sv": "Ström L3"
            },
            "min": 0,
            "max": 32,
            "step": 1,
            "label": " A",
            "labelDecimals": 0
          }
        ]
      },
      {
        "id": "chargerState",
        "title": {
          "en": "Set charger state",
          "sv": "Sätt laddarens tillstånd"
        },
        "titleFormatted": {
          "en": "Set charger state to [[chargerState]]",
          "sv": "Ändra laddarens tillstånd till [[chargerState]]"
        },
        "args": [
          {
            "name": "device",
            "type": "device",
            "filter": "driver_id=charger"
          },
          {
            "name": "chargerState",
            "type": "dropdown",
            "title": {
              "en": "State",
              "sv": "Tillstånd"
            },
            "values": [
              {
                "id": "true",
                "label": {
                  "en": "Enabled",
                  "sv": "Aktiverad"
                }
              },
              {
                "id": "false",
                "label": {
                  "en": "Disabled",
                  "sv": "Inaktiverad"
                }
              }
            ]
          }
        ]
      },
      {
        "id": "enableIdleCurrent",
        "title": {
          "en": "Set charger idle current state",
          "sv": "Erbjud ström när laddning inte är aktiv"
        },
        "titleFormatted": {
          "en": "Set idle current state to [[idleCurrent]]",
          "sv": "Ändra erbjud ström när laddning inte är aktiv till [[idleCurrent]]"
        },
        "args": [
          {
            "name": "device",
            "type": "device",
            "filter": "driver_id=charger"
          },
          {
            "name": "idleCurrent",
            "type": "dropdown",
            "title": {
              "en": "Idle current",
              "sv": "Erbjud ström när laddning inte är aktiv"
            },
            "values": [
              {
                "id": "true",
                "label": {
                  "en": "Yes",
                  "sv": "Ja"
                }
              },
              {
                "id": "false",
                "label": {
                  "en": "No",
                  "sv": "Nej"
                }
              }
            ]
          }
        ]
      },
      {
        "id": "lockCablePermanently",
        "title": {
          "en": "Set permanent cable lock",
          "sv": "Lås kabel permanent"
        },
        "titleFormatted": {
          "en": "Set permanent cable lock to [[lockCable]]",
          "sv": "Ändra permanent kabellås till [[lockCable]]"
        },
        "args": [
          {
            "name": "device",
            "type": "device",
            "filter": "driver_id=charger"
          },
          {
            "name": "lockCable",
            "type": "dropdown",
            "title": {
              "en": "Permanent cable lock",
              "sv": "Lås kabel permanent"
            },
            "values": [
              {
                "id": "true",
                "label": {
                  "en": "Yes",
                  "sv": "Ja"
                }
              },
              {
                "id": "false",
                "label": {
                  "en": "No",
                  "sv": "Nej"
                }
              }
            ]
          }
        ]
      },
      {
        "id": "ledStripBrightness",
        "title": {
          "en": "Set Charger led strip brightness",
          "sv": "Sätt ledstripens ljusstyrka"
        },
        "titleFormatted": {
          "en": "Set led strip brightness to [[ledBrightness]]",
          "sv": "Ändra ledstripens ljusstyrka till [[ledBrightness]]"
        },
        "args": [
          {
            "name": "device",
            "type": "device",
            "filter": "driver_id=charger"
          },
          {
            "name": "ledBrightness",
            "type": "range",
            "title": {
              "en": "Brightness",
              "sv": "Ljusstyrka"
            },
            "min": 0,
            "max": 100,
            "step": 1,
            "label": " %",
            "labelDecimals": 0
          }
        ]
      }
    ]
  }
}